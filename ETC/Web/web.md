# WEB

## Internet(network)의 이해
- 인터넷 !=  WWW
- 인터넷 기반의 서비스  

    | 이름 | 프로토콜 | 포트 | 서비스
    |---|:---:|:---:|---:|
    |`WWW`|HTTP|80|웹서비스|
    |`Email`|SMTP SMTP IMAP |25 110 114|이메일 서비스|
    |`FTP`|FTP|21|파일전송 서비스|
    |`DNS`|NNTP|119|인터넷 뉴스 서비스|

- 인터넷 : TCP/IP 기반의 네트워크가 전세계적으로 확대되어 하나로 연결된 네트워크들의 네트워크(네트워크의 결합체)

## TCP/IP
- 패킷통신 방식의 인터넷 프로토콜인 IP와 전송 조절 프로토콜인 TCP로 이루어져있다
- IP는 패킷 전달 여부를 보증하지 않고, 패킷을 보낸 순서와 받는 순서가 다를 수 있다
- TCP는 IP 위에서 동작하는 프로토콜로 데이터의 전달을 보증하고 보낸 순서대로 받게 해준다
- HTTP, FTP, SMTP등 TCP를 기반으로 한 많은 수의 애플리케이션 프로토콜들이 IP 위에서 동작하기 때문에 묶어서 TCP/IP로 부르기도 한다
- 서킷통신방식 : 하나의 회선을 할당받아 데이터를 주고받는 방식, 회선을 독점, 양방향연결
- 패킷통신방식 : 작은 블록의 패킷으로 데이터를 전송하며 데이터를 전송하는 동안만 네트워크 자원을 사용하도록 하는 방법 -> 오늘날 인터넷 통신은 대부분 패킷방식
- TCP/IP는 패킷통신을 위한 통신규약

## HTTP(Hypertext Transfer Protocal)
- 서버와 클라이언트가 인터넷상에서 데이터를 주고받기 위한 프로토콜
- 어떤 종류의 데이터도 전송할 수 있다(텍스트, 이미지, 동영상, ...)
- 서버/클라이언트 모델
- 클라이언트(요청) <-> 서버(응답)
- 불특정 다수를 대상으로 하는 서비스에 적합, 연결을 끊기때문에 최대연결수보다 훨씬 많은 요청과 응답을 처리할 수 있다
- 무상태 프로토콜(연결을 끊어버리기 때문에 클라이언트의 이전 상황을 알 수 없다)  
-> 정보를 유지하기 위해 cookie 같은 기술이 등장
- https는 보안을 강화한 것 ssl로 암호화
1. connect
2. request
(요청메시지 포맷)
    - 요청헤더
        - 요청 메서드 : GET(select) / POST(insert) / PUT(update) / DELETE / HEAD(헤더정보만요청) / OPTIONS(웹서버가 지원하는 메서드의 종류를 요청) / TRACE(클라이언트의 요청을 그대로 반환 - echo 서비스로 서버 상태를 확인하기 위한 요청)
    - 빈줄
    - 요청바디
        - get은 요청하는 자원을 uri에 붙여서 가져감
        - post나 put 요청일때 바디에 데이터를 담아 전송
3. response
    - 응답헤더
        - 응답 http 프로토콜 버전 + 응답코드 + 응답메시지
        - 날자 등등
    - 빈줄
    - 응답바디
        - 실제 응답 데이터
4. close

## URL(Uniform Resource Locator)
- 인터넷 상의 자원의 위치
- 특정 웹 서버의 특정 파일에 접근하기 위한 경로 혹은 주소
- 접근 프로토콜://주소 또는 도메인 이름/문서의 경로/문서이름  
ex] http://www.naver.com/docs/index.html
- ip : 집주소 = 컴퓨터, port : 방
- 하나의 물리적 컴퓨터는 여러 개의 소프트웨어 서버가 동작할 수 있는데 이 서버는 포트 값이 다르게 동작해야 한다

## 브라우저
- 서버에서 전송한 데이터가 클라이언트에 도착해야 할 곳은 browser이다
- 브라우저에는 데이터를 해석해주는 파서와 데이터를 화면에 표현해주는 렌더링엔진이 포함되어 있다
- 이런 작업은 대부분 브라우저 내부에서 이루어진다
- 브라우저 내부를 이해하면 웹 개발을 하면서 맞닥뜨리는 난해한 문제를 해결할 수 있고 보다 최적화된 웹개발을 할 수 있다
### _구성요소_
- 사용자인터페이트 : 주소표시줄, 이전/다음 버튼, 북마크 등
- 브라우저 엔진 : 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
- 렌더링 엔진 : 요청한 콘텐츠를 표시 = HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시함
- 통신 : http 요청과 같은 네트워크 호출에 사용됨, 플랫폼 독립적인 인터페이스이고 각 플랫폼 하부에서 실행
- UI backend : 콤보 박스와 창 같은 기본적인 장치를 그림
- 자바스크립트 해석기 : 자바스크립트 코드를 해석하고 실행
- 자료저장소

### _렌더링엔진_
- 요청받은 내용을 브라우저 화면에 표시
- HTML 및 XML 문서와 이미지를 표시
- 동작과정
    - DOM 트리 구축을 위한 HTML 파싱 -> 렌더트리구축 -> 렌더트리배치 -> 렌더트리 그리기
    - HTML -> HTML파서 -> DOM트리 -> 어테치먼트 -> 렌더트리 -> 그리기
    - CSS  -> CSS 파서 -> CSSOM   ->

### _parsing_
- 문서 파싱은 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 것
- 파싱 결과는 보통 문서 구조를 나타내는 노드 트리인데 parsing tree 또는 syntax tree라고 한다

### _DOM(The Document Object Model)_
- 작성한 HTL 코드가 브라우저에 의해 파싱되면 DOM이 됨

# 웹서버
## 웹서버란?
- 웹서버는 소프트웨어를 보통 말하지만, 웹서버스프트웨어가 동작하는 컴퓨터를 말한다
- 웹서버의 가장 중요한 기능은 Client가 요청하는 HTML문서나 각종 Resource를 전달하는 것
- 웹 브라우저나 웹 크롤러 모두 웹 서버에게 http에 맞도록 리소스를 요청하고, 웹 서버는 요청한 리소스를 반환
- 웹 브라우저나 웹 크롤러가 요청하는 리소스는 컴퓨터에 저장되어 있는 정적인 데이터(이미지, HTML 파일, CSS파일 등)이거나 동적인 결과(웹서버에 의해 실행되는 프로그램을 통해서 만들어진 결과물)가 될 수 있다
- 클라이언트와 서버간에는 http를 이용해 통신
- 웹브라우저 <--웹페이지 요청, 응답--> 웹서버

## 웹서버 소프트웨어의 종류
- Apache, NginX, Microsoft, Google 웹서버

# WAS(Web Application Server)
- 클라이언트/서버구조 : 클라이언트는 서비스를 제공하는 서버에게 정보를 요청하여 응답 받은 결과를 사용
- DBMS(Database Management System) : 다수의 사용자들이 데이터베이스 내의 데이터를 접근할 수 있도록 해주는 소프트웨어
- MidellWare : 클라이언트 쪽에 비즈니스 로직이 많을 경우, 클라이언트 관리(배포 등)로 인해 많은 비용이 발생, 비즈니스 로직을 클라이언트와 DBMS 사이의 미들웨어 서버에서 동작하도록 함으로써 클라이언트는 입력과 출력만 담당하도록 함, 프로그램 로직이 변경되어도 다시 배포할 필요없이 미들웨어만 변경하면 됨
- WAS는 일종의 미들웨어로 웹 클라이언트(보통 웹 브라우저)의 요청 중 보통 웹 어플리케이션이 동작하도록 지원하는 목적을 가짐
- 브라우저 <-> WAS <-> DBMS
- 기본기능
    - 프로그램 실행환경과 데이터베이스 접속기능
    - 여러가지 트랜잭션 관리
    - 업무 비즈니스 수행

## Web Server VS WAS
- 웹서버는 보통 정적인 콘텐츠를 웹 브라우저에게 전송하는 역할
- WAS는 프로그램의 동적인 결과를 웹 브라우저에게 전송하는 역할 담당

- WAS도 보통 자체적으로 웹 서버 기능을 내장
- 현재는 WAS가 가지고 있는 웹 서버도 정적인 컨텐츠를 처리하는 데 성능상 큰 차이가 없다
- 규모가 커질수록 웹 서버와 WAS를 분리 -> 장애 극복 기능을 위해 
    - 스위치 - 웹서버 - WAS


---
- [edwith 부스트코스 웹 프로그래밍](https://www.edwith.org/boostcourse-web/joinLectures/12952)
- [개알못을 위한 TCP/IP의 개념](https://brunch.co.kr/@wangho/6)
- [NAVER D2 - 브라우저는 어떻게 동작하는가?](https://d2.naver.com/helloworld/59361)